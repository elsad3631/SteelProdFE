import{g as M}from"./assets-2a66e18f.js";import{D as B,L as F}from"./KTDataTable-b34f43d4.js";import{S as k}from"./sweetalert2-e92a9e07.js";import{a as T}from"./alphabet-a5bbf61c.js";import{j as C,r,an as N,_ as A,l as h,m as u,n as f,p as e,B as m,z as y,W as c,F as I,q as L,w as D,aj as S,O as p,x,am as E,a0 as g,o as V,M as z}from"./index-ac5572e4.js";import{a as U}from"./index-68cf51a8.js";import{g as R}from"./markings-88375b0b.js";const q=C({name:"export-markings-modal",components:{},setup(){const t=r(null),o=r(!1),n=r({Filter:"",fromName:"A",toName:"Z",exportFormat:"excel"}),b=r({});return{formData:n,rules:b,submit:()=>{t.value&&t.value.validate(_=>{if(_){o.value=!0;let l=r(""),i=r("");if(n.value.exportFormat=="excel")l.value="ExportExcel",i.value=".xlsx";else if(n.value.exportFormat=="csv")l.value="ExportCsv",i.value=".csv";else{k.fire({text:"Attenzione, selezionare il formato del file.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}),o.value=!1;return}N.get(`Marking/${l.value}?fromName=${n.value.fromName}&toName=${n.value.toName}`,"blob").then(a=>{const $=URL.createObjectURL(new Blob([a.data])),v=document.createElement("a");v.href=$,v.setAttribute("download","export marcature"+i.value),document.body.appendChild(v),v.click(),window.URL.revokeObjectURL($),document.body.removeChild(v),o.value=!1,k.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})}).catch(({response:a})=>{console.log(a),o.value=!1,k.fire({text:"Attenzione, si è verificato un errore.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})})}else return k.fire({text:"Attenzione, si è verificato un errore.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}),!1})},formRef:t,loading:o,getAssetPath:M,alphabet:T}}});const O={class:"modal fade",id:"kt_export_modal",tabindex:"-1","aria-hidden":"true"},j={class:"modal-dialog modal-dialog-centered mw-650px"},K={class:"modal-content"},W={class:"modal-header"},H=e("h2",{class:"fw-bold"},"Export Marcature",-1),X={id:"kt_export_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},Y={class:"modal-body scroll-y mx-5 mx-xl-15 my-7"},P={class:"fv-row mb-10"},Z=e("label",{class:"fs-5 fw-semobold form-label mb-5"},"Seleziona il range da lettera a lettera:",-1),G={class:"input-group mb-5"},J=["value"],Q=e("span",{class:"input-group-text"},"-",-1),ee=["value"],te={class:"fv-row mb-10"},oe=e("label",{class:"fs-5 fw-semobold form-label mb-5"},"Seleziona il formato:",-1),ae=e("option",{value:"excel"},"Excel",-1),se=e("option",{value:"csv"},"CSV",-1),le=[ae,se],ne={class:"text-center"},re=e("button",{type:"reset",id:"kt_export_cancel",class:"btn btn-light me-3"}," Scarta ",-1),ie=["data-kt-indicator"],de={key:0,class:"indicator-label"},me={key:1,class:"indicator-progress"},ce=e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function ue(t,o,n,b,d,_){const l=h("KTIcon"),i=h("el-form");return u(),f("div",O,[e("div",j,[e("div",K,[e("div",W,[H,e("div",X,[m(l,{"icon-name":"cross","icon-class":"fs-1"})])]),e("div",Y,[m(i,{onSubmit:o[3]||(o[3]=E(a=>t.submit(),["prevent"])),model:t.formData,rules:t.rules,ref:"formRef"},{default:y(()=>[e("div",P,[Z,e("div",G,[c(e("select",{class:"form-select","aria-label":"Select example","onUpdate:modelValue":o[0]||(o[0]=a=>t.formData.fromName=a)},[(u(!0),f(I,null,L(t.alphabet,a=>(u(),f("option",{key:a.name,value:a.name},D(a.name),9,J))),128))],512),[[S,t.formData.fromName]]),Q,c(e("select",{class:"form-select","aria-label":"Select example","onUpdate:modelValue":o[1]||(o[1]=a=>t.formData.toName=a)},[(u(!0),f(I,null,L(t.alphabet,a=>(u(),f("option",{key:a.name,value:a.name},D(a.name),9,ee))),128))],512),[[S,t.formData.toName]])])]),e("div",te,[oe,c(e("select",{class:"form-select","aria-label":"Select example","onUpdate:modelValue":o[2]||(o[2]=a=>t.formData.exportFormat=a)},le,512),[[S,t.formData.exportFormat]])]),e("div",ne,[re,e("button",{"data-kt-indicator":t.loading?"on":null,type:"submit",class:"btn btn-lg btn-primary"},[t.loading?x("",!0):(u(),f("span",de,[p(" Invia "),m(l,{"icon-name":"arrow-right","icon-class":"fs-3 ms-2 me-0"})])),t.loading?(u(),f("span",me,[p(" Attendere... "),ce])):x("",!0)],8,ie)])]),_:1},8,["model","rules"])])])])])}const fe=A(q,[["render",ue]]),pe=C({name:"add-marking-modal",components:{},setup(t,{emit:o}){const n=r(null),b=r(null),d=r(!1),_=r({MaterialName:"",IdFac:"0",Dx:"0",Dy:"0",Lung:"0",Larg:"0",Str:"0",From:"",To:""}),l=r({MaterialName:[{required:!0,message:"Inserire il nome del materiale",trigger:"change"}]}),i="Marking";return{formData:_,rules:l,submit:()=>{n.value&&n.value.validate($=>{if($)d.value=!0,N.post(`${i}/Create`,_.value).then(()=>{d.value=!1,k.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}),o("formAddSubmitted",_.value)}).catch(({response:v})=>{console.log(v),d.value=!1,k.fire({text:"Attenzione, si è verificato un errore.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})});else return d.value=!1,k.fire({text:"Attenzione, non tutti i campi sono corretti.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}),!1})},formRef:n,loading:d,addCustomerModalRef:b,getAssetPath:M}}}),be={class:"modal fade",id:"kt_modal_add",ref:"addModalRef",tabindex:"-1","aria-hidden":"true"},_e={class:"modal-dialog modal-dialog-centered mw-650px"},ve={class:"modal-content"},ge={class:"modal-header",id:"kt_modal_add_header"},he=e("h2",{class:"fw-bold"},"Aggiungi marcatura",-1),ye={id:"kt_modal_add_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},$e={class:"modal-body py-10 px-lg-17"},ke={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_header","data-kt-scroll-wrappers":"#kt_modal_add_scroll","data-kt-scroll-offset":"300px"},De={class:"fv-row mb-7"},we=e("label",{class:"fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"Nome materiale")],-1),xe={class:"fv-row mb-7"},Se=e("label",{class:"fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"IdFac")],-1),Ie={class:"fv-row mb-7"},Me=e("label",{class:"fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"DX")],-1),Ce={class:"fv-row mb-7"},Ne=e("label",{class:"fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"DY")],-1),Ae={class:"fv-row mb-7"},Le=e("label",{class:"fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"Lung")],-1),Ee={class:"fv-row mb-7"},Be=e("label",{class:"fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"Larg")],-1),Fe={class:"fv-row mb-7"},Te=e("label",{class:"fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"Str")],-1),Ve=e("div",{class:"fv-row mb-7"},[e("label",{class:"fs-6 fw-semobold mb-2"},"Range")],-1),ze={class:"row mb-7"},Ue={class:"col-md-6 col-lg-6 col-sm-12"},Re=e("label",{class:"fs-6 fw-semobold mb-2"},"Da",-1),qe={class:"col-md-6 col-lg-6 col-sm-12"},Oe=e("label",{class:"fs-6 fw-semobold mb-2"},"A",-1),je={class:"modal-footer flex-center"},Ke=e("button",{type:"reset",id:"kt_modal_add_cancel",class:"btn btn-light me-3"}," Scarta ",-1),We=["data-kt-indicator"],He={key:0,class:"indicator-label"},Xe={key:1,class:"indicator-progress"},Ye=e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function Pe(t,o,n,b,d,_){const l=h("KTIcon"),i=h("el-form");return u(),f("div",be,[e("div",_e,[e("div",ve,[e("div",ge,[he,e("div",ye,[m(l,{"icon-name":"cross","icon-class":"fs-1"})])]),m(i,{onSubmit:o[9]||(o[9]=E(a=>t.submit(),["prevent"])),model:t.formData,rules:t.rules,ref:"formRef"},{default:y(()=>[e("div",$e,[e("div",ke,[e("div",De,[we,c(e("input",{class:"form-control","onUpdate:modelValue":o[0]||(o[0]=a=>t.formData.MaterialName=a),type:"text",placeholder:"Nome materiale..."},null,512),[[g,t.formData.MaterialName]])]),e("div",xe,[Se,c(e("input",{class:"form-control","onUpdate:modelValue":o[1]||(o[1]=a=>t.formData.IdFac=a),type:"text",placeholder:"IdFac..."},null,512),[[g,t.formData.IdFac]])]),e("div",Ie,[Me,c(e("input",{class:"form-control","onUpdate:modelValue":o[2]||(o[2]=a=>t.formData.Dx=a),type:"text",placeholder:"DX..."},null,512),[[g,t.formData.Dx]])]),e("div",Ce,[Ne,c(e("input",{class:"form-control","onUpdate:modelValue":o[3]||(o[3]=a=>t.formData.Dy=a),type:"text",placeholder:"DY..."},null,512),[[g,t.formData.Dy]])]),e("div",Ae,[Le,c(e("input",{class:"form-control","onUpdate:modelValue":o[4]||(o[4]=a=>t.formData.Lung=a),type:"text",placeholder:"Lung..."},null,512),[[g,t.formData.Lung]])]),e("div",Ee,[Be,c(e("input",{class:"form-control","onUpdate:modelValue":o[5]||(o[5]=a=>t.formData.Larg=a),type:"text",placeholder:"Larg..."},null,512),[[g,t.formData.Larg]])]),e("div",Fe,[Te,c(e("input",{class:"form-control","onUpdate:modelValue":o[6]||(o[6]=a=>t.formData.Str=a),type:"text",placeholder:"Str..."},null,512),[[g,t.formData.Str]])]),Ve,e("div",ze,[e("div",Ue,[Re,c(e("input",{class:"form-control ms-2","onUpdate:modelValue":o[7]||(o[7]=a=>t.formData.From=a),type:"number"},null,512),[[g,t.formData.From]])]),e("div",qe,[Oe,c(e("input",{class:"form-control ms-2","onUpdate:modelValue":o[8]||(o[8]=a=>t.formData.To=a),type:"number"},null,512),[[g,t.formData.To]])])])])]),e("div",je,[Ke,e("button",{"data-kt-indicator":t.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[t.loading?x("",!0):(u(),f("span",He,[p(" Invia "),m(l,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0"})])),t.loading?(u(),f("span",Xe,[p(" Attendere... "),Ye])):x("",!0)],8,We)])]),_:1},8,["model","rules"])])])],512)}const Ze=A(pe,[["render",Pe]]),Ge=C({name:"modules-xml-list",components:{Datatable:B,ExportMarkingsModal:fe,AddMarkingModal:Ze,Loading:F},setup(){let t=r(!0);const o=r([{columnName:"Nome materiale",columnLabel:"materialName",sortEnabled:!0,columnWidth:175},{columnName:"Dx",columnLabel:"dx",sortEnabled:!0,columnWidth:230},{columnName:"Dy",columnLabel:"dy",sortEnabled:!0,columnWidth:175},{columnName:"Azioni",columnLabel:"actions",sortEnabled:!1,columnWidth:135}]),n=r([]);let b=r([]);async function d(s){b.value=await R(s),t.value=!1}V(()=>{t.value=!0,d("")});const _=()=>{n.value.forEach(s=>{l(s)}),n.value.length=0},l=s=>{t.value=!0,N.post(`Marking/Delete?id=${s}`,{}).then(()=>{d("")}).catch(({response:w})=>{console.log(w)})},i=r("");return{tableData:b,tableHeader:o,deleteItem:l,search:i,searchItems:()=>{d(i.value),z.reinitialization()},selectedIds:n,deleteFewItems:_,sort:s=>{const w=s.order==="asc";s.label&&U(b.value,s.label,{reverse:w})},onItemSelect:s=>{n.value=s},getAssetPath:M,loading:t,getItems:d}}}),Je={class:"card"},Qe={class:"card-header border-0 pt-6"},et={class:"card-title"},tt={class:"d-flex align-items-center position-relative my-1"},ot={class:"card-toolbar"},at={key:0,class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},st={type:"button",class:"btn btn-light-primary me-3","data-bs-toggle":"modal","data-bs-target":"#kt_export_modal"},lt={type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add"},nt={key:1,class:"d-flex justify-content-end align-items-center","data-kt-customer-table-toolbar":"selected"},rt={class:"fw-bold me-5"},it={class:"me-2"},dt=e("div",{class:"d-flex justify-content-end align-items-center d-none","data-kt-customer-table-toolbar":"selected"},[e("div",{class:"fw-bold me-5"},[e("span",{class:"me-2","data-kt-customer-table-select":"selected_count"}),p("Selezionati ")]),e("button",{type:"button",class:"btn btn-danger","data-kt-customer-table-select":"delete_selected"}," Elimina Selezionati ")],-1),mt={class:"card-body pt-0"},ct=["onClick"];function ut(t,o,n,b,d,_){const l=h("KTIcon"),i=h("router-link"),a=h("Datatable"),$=h("ExportMarkingsModal"),v=h("AddMarkingModal");return u(),f(I,null,[e("div",Je,[e("div",Qe,[e("div",et,[e("div",tt,[m(l,{"icon-name":"magnifier","icon-class":"fs-1 position-absolute ms-6"}),c(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>t.search=s),onInput:o[1]||(o[1]=s=>t.searchItems()),class:"form-control form-control-solid w-250px ps-15",placeholder:"Ricerca"},null,544),[[g,t.search]])])]),e("div",ot,[t.selectedIds.length===0?(u(),f("div",at,[e("button",st,[m(l,{"icon-name":"exit-up","icon-class":"fs-2"}),p(" Export ")]),e("button",lt,[m(l,{"icon-name":"plus","icon-class":"fs-2"}),p(" Aggiungi marcatura ")])])):(u(),f("div",nt,[e("div",rt,[e("span",it,D(t.selectedIds.length),1),p("Selezionati ")]),e("button",{type:"button",class:"btn btn-danger",onClick:o[2]||(o[2]=s=>t.deleteFewItems())}," Elimina Selezionati ")])),dt])]),e("div",mt,[m(a,{onOnSort:t.sort,onOnItemsSelect:t.onItemSelect,data:t.tableData,header:t.tableHeader,"enable-items-per-page-dropdown":!0,"checkbox-enabled":!0,"checkbox-label":"id",loading:t.loading},{materialName:y(({row:s})=>[m(i,{to:{name:"update-marking",params:{id:s.id}},class:"text-gray-600 text-hover-primary mb-1"},{default:y(()=>[p(D(s.materialName),1)]),_:2},1032,["to"])]),dx:y(({row:s})=>[p(D(s.dx),1)]),dy:y(({row:s})=>[p(D(s.dy),1)]),actions:y(({row:s})=>[m(i,{to:{name:"update-marking",params:{id:s.id}},class:"btn btn-light-info me-1"},{default:y(()=>[p("Dettagli")]),_:2},1032,["to"]),e("button",{onClick:w=>t.deleteItem(s.id),class:"btn btn-light-danger me-1"},"Elimina",8,ct)]),_:1},8,["onOnSort","onOnItemsSelect","data","header","loading"])])]),m($),m(v,{onFormAddSubmitted:o[3]||(o[3]=s=>t.getItems(""))})],64)}const yt=A(Ge,[["render",ut]]);export{yt as default};
