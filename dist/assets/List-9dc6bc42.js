import{g as w}from"./assets-1d85a7f2.js";import{D as U,L as q}from"./KTDataTable-b879a43b.js";import{h as D}from"./dom-2bc3e434.js";import{S as y}from"./sweetalert2-1d8e21d8.js";import{m as M,r as n,ac as E,av as T,_ as A,p as b,q as g,w as v,x as t,K as m,C as $,a0 as N,a6 as B,L as h,A as S,aw as x,o as K,M as O,z as I,F as R}from"./index-f4707fd9.js";import{a as V}from"./index-2c54fd16.js";import{g as F}from"./materialTypes-2b51c66c.js";const L=M({name:"update-material-type",components:{},props:{id:{type:Number,required:!0},name:{type:String,required:!0}},setup(e,{emit:o}){const r=n(null),f=n(null),a=n(!1),l=n({Id:e.id??0,Name:e.name??""});E(()=>[e.id,e.name],([p,_])=>{l.value.Id=p!==void 0?Number(p):0,l.value.Name=_!==void 0?String(_):""});const s=n({name:[{required:!0,message:"Inserire il nome",trigger:"change"}]}),u="MaterialType";return{formData:l,rules:s,submit:()=>{r.value&&r.value.validate(p=>{if(p)a.value=!0,T.post(`${u}/Update`,l.value).then(()=>{a.value=!1,y.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{D(f.value)}),o("formUpdateSubmitted",l.value)}).catch(({response:_})=>{console.log(_),a.value=!1,y.fire({text:"Attenzione, si è verificato un errore.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})});else return a.value=!1,y.fire({text:"Attenzione, non tutti i campi sono corretti.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}),!1})},formRef:r,loading:a,addCustomerModalRef:f,getAssetPath:w}}}),j={class:"modal fade",id:"kt_modal_update_type",ref:"updateTypeModal",tabindex:"-1","aria-hidden":"true"},H={class:"modal-dialog modal-dialog-centered mw-650px"},W={class:"modal-content"},P={class:"modal-header",id:"kt_modal_type_header"},G=t("h2",{class:"fw-bold"},"Modifica tipologia materiale",-1),J={id:"kt_modal_type_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},Q={class:"modal-body py-10 px-lg-17"},X={class:"scroll-y me-n7 pe-7",id:"kt_modal_type_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_type_header","data-kt-scroll-wrappers":"#kt_modal_type_scroll","data-kt-scroll-offset":"300px"},Y={class:"fv-row mb-7"},Z=t("label",{class:"required fs-6 fw-semobold mb-2"},"Nome",-1),ee={class:"modal-footer flex-center"},te=["data-kt-indicator"],oe={key:0,class:"indicator-label"},ae={key:1,class:"indicator-progress"},se=t("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function ne(e,o,r,f,a,l){const s=b("KTIcon"),u=b("el-form");return g(),v("div",j,[t("div",H,[t("div",W,[t("div",P,[G,t("div",J,[m(s,{"icon-name":"cross","icon-class":"fs-1"})])]),m(u,{onSubmit:o[1]||(o[1]=x(c=>e.submit(),["prevent"])),model:e.formData,rules:e.rules,ref:"formRef"},{default:$(()=>[t("div",Q,[t("div",X,[t("div",Y,[Z,N(t("input",{required:"",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=c=>e.formData.Name=c),type:"text",placeholder:"Nome..."},null,512),[[B,e.formData.Name]])])])]),t("div",ee,[t("button",{"data-kt-indicator":e.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[e.loading?S("",!0):(g(),v("span",oe,[h(" Invia "),m(s,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0"})])),e.loading?(g(),v("span",ae,[h(" Attendere... "),se])):S("",!0)],8,te)])]),_:1},8,["model","rules"])])])],512)}const le=A(L,[["render",ne]]),ie=M({name:"add-material-type-modal",components:{},setup(e,{emit:o}){const r=n(null),f=n(null),a=n(!1),l=n({Name:""}),s=n({name:[{required:!0,message:"Inserire il nome",trigger:"change"}]}),u="MaterialType";return{formData:l,rules:s,submit:()=>{r.value&&r.value.validate(p=>{if(p)a.value=!0,T.post(`${u}/Create`,l.value).then(()=>{a.value=!1,y.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{D(f.value)}),o("formAddSubmitted",l.value)}).catch(({response:_})=>{console.log(_),a.value=!1,y.fire({text:"Attenzione, si è verificato un errore.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})});else return a.value=!1,y.fire({text:"Attenzione, non tutti i campi sono corretti.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}),!1})},formRef:r,loading:a,addCustomerModalRef:f,getAssetPath:w}}}),re={class:"modal fade",id:"kt_modal_add_type",ref:"addTypeModal",tabindex:"-1","aria-hidden":"true"},de={class:"modal-dialog modal-dialog-centered mw-650px"},ce={class:"modal-content"},me={class:"modal-header",id:"kt_modal_add_type_header"},ue=t("h2",{class:"fw-bold"},"Aggiungi tipologia materiale",-1),pe={id:"kt_modal_add_type_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},fe={class:"modal-body py-10 px-lg-17"},_e={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_type_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_type_header","data-kt-scroll-wrappers":"#kt_modal_add_type_scroll","data-kt-scroll-offset":"300px"},be={class:"fv-row mb-7"},he=t("label",{class:"required fs-6 fw-semobold mb-2"},"Nome",-1),ge={class:"modal-footer flex-center"},ve=t("button",{type:"reset",id:"kt_modal_add_customer_cancel",class:"btn btn-light me-3"}," Scarta ",-1),ye=["data-kt-indicator"],$e={key:0,class:"indicator-label"},ke={key:1,class:"indicator-progress"},Se=t("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function Ce(e,o,r,f,a,l){const s=b("KTIcon"),u=b("el-form");return g(),v("div",re,[t("div",de,[t("div",ce,[t("div",me,[ue,t("div",pe,[m(s,{"icon-name":"cross","icon-class":"fs-1"})])]),m(u,{onSubmit:o[1]||(o[1]=x(c=>e.submit(),["prevent"])),model:e.formData,rules:e.rules,ref:"formRef"},{default:$(()=>[t("div",fe,[t("div",_e,[t("div",be,[he,N(t("input",{required:"",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=c=>e.formData.Name=c),type:"text",placeholder:"Nome..."},null,512),[[B,e.formData.Name]])])])]),t("div",ge,[ve,t("button",{"data-kt-indicator":e.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[e.loading?S("",!0):(g(),v("span",$e,[h(" Invia "),m(s,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0"})])),e.loading?(g(),v("span",ke,[h(" Attendere... "),Se])):S("",!0)],8,ye)])]),_:1},8,["model","rules"])])])],512)}const Ie=A(ie,[["render",Ce]]),we=M({name:"accessory-type-list",components:{Datatable:U,UpdateMaterialTypeModal:le,AddMaterialTypeModal:Ie,Loading:q},setup(){let e=n(!0),o=n(0),r=n("");const f=n([{columnName:"Nome",columnLabel:"name",sortEnabled:!0,columnWidth:300},{columnName:"Azioni",columnLabel:"actions",sortEnabled:!1,columnWidth:135}]),a=n([]);let l=n([]);async function s(d){l.value=await F(d),e.value=!1}K(()=>{e.value=!0,s("")});const u=()=>{a.value.forEach(d=>{c(d)}),a.value.length=0},c=d=>{e.value=!0,T.post(`MaterialType/Delete?id=${d}`,{}).then(()=>{y.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{s("")})}).catch(({response:k})=>{y.fire({text:k.data.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{s("")})})},p=n(""),_=()=>{s(p.value),O.reinitialization()},i=d=>{const k=d.order==="asc";d.label&&V(l.value,d.label,{reverse:k})},C=d=>{a.value=d};function z(d,k){o.value=d,r.value=k}return{tableData:l,tableHeader:f,deleteItem:c,search:p,searchItems:_,selectedIds:a,deleteFewItems:u,sort:i,onItemSelect:C,getAssetPath:w,loading:e,selectedId:o,selectedName:r,showUpdateModal:z,getItems:s}}}),Me={class:"card"},Te={class:"card-header border-0 pt-6"},Ae={class:"card-title"},Ne={class:"d-flex align-items-center position-relative my-1"},Be={class:"card-toolbar"},De={key:0,class:"d-flex justify-content-end","data-kt-material-table-toolbar":"base"},xe={type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_type"},ze={key:1,class:"d-flex justify-content-end align-items-center","data-kt-material-table-toolbar":"selected"},Ue={class:"fw-bold me-5"},qe={class:"me-2"},Ee=t("div",{class:"d-flex justify-content-end align-items-center d-none","data-kt-material-table-toolbar":"selected"},[t("div",{class:"fw-bold me-5"},[t("span",{class:"me-2","data-kt-material-table-select":"selected_count"}),h("Selezionati ")]),t("button",{type:"button",class:"btn btn-danger","data-kt-material-table-select":"delete_selected"}," Elimina Selezionati ")],-1),Ke={class:"card-body pt-0"},Oe=["onClick"],Re=["onClick"];function Ve(e,o,r,f,a,l){const s=b("KTIcon"),u=b("router-link"),c=b("Datatable"),p=b("UpdateMaterialTypeModal"),_=b("AddMaterialTypeModal");return g(),v(R,null,[t("div",Me,[t("div",Te,[t("div",Ae,[t("div",Ne,[m(s,{"icon-name":"magnifier","icon-class":"fs-1 position-absolute ms-6"}),N(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=i=>e.search=i),onInput:o[1]||(o[1]=i=>e.searchItems()),class:"form-control form-control-solid w-250px ps-15",placeholder:"Ricerca"},null,544),[[B,e.search]])])]),t("div",Be,[e.selectedIds.length===0?(g(),v("div",De,[t("button",xe,[m(s,{"icon-name":"plus","icon-class":"fs-2"}),h(" Aggiungi tipologia materiale ")])])):(g(),v("div",ze,[t("div",Ue,[t("span",qe,I(e.selectedIds.length),1),h("Selezionati ")]),t("button",{type:"button",class:"btn btn-danger",onClick:o[2]||(o[2]=i=>e.deleteFewItems())}," Elimina Selezionati ")])),Ee])]),t("div",Ke,[m(c,{onOnSort:e.sort,onOnItemsSelect:e.onItemSelect,data:e.tableData,header:e.tableHeader,"enable-items-per-page-dropdown":!0,"checkbox-enabled":!0,"checkbox-label":"id",loading:e.loading},{code:$(({row:i})=>[h(I(i.code),1)]),name:$(({row:i})=>[m(u,{to:{name:"update-accessory",params:{id:i.id}},class:"text-gray-600 text-hover-primary mb-1"},{default:$(()=>[h(I(i.name),1)]),_:2},1032,["to"])]),actions:$(({row:i})=>[t("button",{class:"btn btn-light-info me-1","data-bs-toggle":"modal","data-bs-target":"#kt_modal_update_type",onClick:C=>e.showUpdateModal(i.id,i.name)},"Dettagli",8,Oe),t("button",{onClick:C=>e.deleteItem(i.id),class:"btn btn-light-danger me-1"},"Elimina",8,Re)]),_:1},8,["onOnSort","onOnItemsSelect","data","header","loading"])])]),m(p,{id:e.selectedId,name:e.selectedName,onFormUpdateSubmitted:o[3]||(o[3]=i=>e.getItems(""))},null,8,["id","name"]),m(_,{onFormAddSubmitted:o[4]||(o[4]=i=>e.getItems(""))})],64)}const Je=A(we,[["render",Ve]]);export{Je as default};
