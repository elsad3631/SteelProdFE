import{g as w}from"./assets-f2dd46cc.js";import{D as P,L as U}from"./KTDataTable-93d06d7d.js";import{h as D}from"./dom-543d1801.js";import{S as v}from"./sweetalert2-894bbab6.js";import{m as T,r as s,ac as q,av as A,_ as N,p as b,q as g,w as y,x as t,K as m,C as $,a0 as B,a6 as M,L as h,A as S,aw as x,o as E,M as K,z as I,F as O}from"./index-9aa4c59a.js";import{a as R}from"./index-0fa15a47.js";import{g as V}from"./paymentTypes-753efdfb.js";const F=T({name:"update-payment-type",components:{},props:{id:{type:Number,required:!0},name:{type:String,required:!0}},setup(e,{emit:o}){const d=s(null),f=s(null),a=s(!1),l=s({Id:e.id??0,Name:e.name??""});q(()=>[e.id,e.name],([p,_])=>{l.value.Id=p!==void 0?Number(p):0,l.value.Name=_!==void 0?String(_):""});const n=s({name:[{required:!0,message:"Inserire il nome",trigger:"change"}]}),u="PaymentType";return{formData:l,rules:n,submit:()=>{d.value&&d.value.validate(p=>{if(p)a.value=!0,A.post(`${u}/Update`,l.value).then(()=>{a.value=!1,v.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{D(f.value)}),o("formUpdateSubmitted",l.value)}).catch(({response:_})=>{console.log(_),a.value=!1,v.fire({text:"Attenzione, si è verificato un errore.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})});else return a.value=!1,v.fire({text:"Attenzione, non tutti i campi sono corretti.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}),!1})},formRef:d,loading:a,addCustomerModalRef:f,getAssetPath:w}}}),L={class:"modal fade",id:"kt_modal_update_type",ref:"updateTypeModal",tabindex:"-1","aria-hidden":"true"},j={class:"modal-dialog modal-dialog-centered mw-650px"},H={class:"modal-content"},W={class:"modal-header",id:"kt_modal_type_header"},G=t("h2",{class:"fw-bold"},"Modifica tipologia pagamento",-1),J={id:"kt_modal_type_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},Q={class:"modal-body py-10 px-lg-17"},X={class:"scroll-y me-n7 pe-7",id:"kt_modal_type_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_type_header","data-kt-scroll-wrappers":"#kt_modal_type_scroll","data-kt-scroll-offset":"300px"},Y={class:"fv-row mb-7"},Z=t("label",{class:"required fs-6 fw-semobold mb-2"},"Nome",-1),ee={class:"modal-footer flex-center"},te=["data-kt-indicator"],oe={key:0,class:"indicator-label"},ae={key:1,class:"indicator-progress"},ne=t("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function se(e,o,d,f,a,l){const n=b("KTIcon"),u=b("el-form");return g(),y("div",L,[t("div",j,[t("div",H,[t("div",W,[G,t("div",J,[m(n,{"icon-name":"cross","icon-class":"fs-1"})])]),m(u,{onSubmit:o[1]||(o[1]=x(c=>e.submit(),["prevent"])),model:e.formData,rules:e.rules,ref:"formRef"},{default:$(()=>[t("div",Q,[t("div",X,[t("div",Y,[Z,B(t("input",{required:"",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=c=>e.formData.Name=c),type:"text",placeholder:"Nome..."},null,512),[[M,e.formData.Name]])])])]),t("div",ee,[t("button",{"data-kt-indicator":e.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[e.loading?S("",!0):(g(),y("span",oe,[h(" Invia "),m(n,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0"})])),e.loading?(g(),y("span",ae,[h(" Attendere... "),ne])):S("",!0)],8,te)])]),_:1},8,["model","rules"])])])],512)}const le=N(F,[["render",se]]),ie=T({name:"add-payment-type-modal",components:{},setup(e,{emit:o}){const d=s(null),f=s(null),a=s(!1),l=s({Name:""}),n=s({name:[{required:!0,message:"Inserire il nome",trigger:"change"}]}),u="PaymentType";return{formData:l,rules:n,submit:()=>{d.value&&d.value.validate(p=>{if(p)a.value=!0,A.post(`${u}/Create`,l.value).then(()=>{a.value=!1,v.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{D(f.value)}),o("formAddSubmitted",l.value)}).catch(({response:_})=>{console.log(_),a.value=!1,v.fire({text:"Attenzione, si è verificato un errore.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})});else return a.value=!1,v.fire({text:"Attenzione, non tutti i campi sono corretti.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}),!1})},formRef:d,loading:a,addCustomerModalRef:f,getAssetPath:w}}}),de={class:"modal fade",id:"kt_modal_add_type",ref:"addTypeModal",tabindex:"-1","aria-hidden":"true"},re={class:"modal-dialog modal-dialog-centered mw-650px"},ce={class:"modal-content"},me={class:"modal-header",id:"kt_modal_add_type_header"},ue=t("h2",{class:"fw-bold"},"Aggiungi tipologia pagamento",-1),pe={id:"kt_modal_add_type_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},fe={class:"modal-body py-10 px-lg-17"},_e={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_type_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_type_header","data-kt-scroll-wrappers":"#kt_modal_add_type_scroll","data-kt-scroll-offset":"300px"},be={class:"fv-row mb-7"},he=t("label",{class:"required fs-6 fw-semobold mb-2"},"Nome",-1),ge={class:"modal-footer flex-center"},ye=t("button",{type:"reset",id:"kt_modal_add_customer_cancel",class:"btn btn-light me-3"}," Scarta ",-1),ve=["data-kt-indicator"],$e={key:0,class:"indicator-label"},ke={key:1,class:"indicator-progress"},Se=t("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function Ce(e,o,d,f,a,l){const n=b("KTIcon"),u=b("el-form");return g(),y("div",de,[t("div",re,[t("div",ce,[t("div",me,[ue,t("div",pe,[m(n,{"icon-name":"cross","icon-class":"fs-1"})])]),m(u,{onSubmit:o[1]||(o[1]=x(c=>e.submit(),["prevent"])),model:e.formData,rules:e.rules,ref:"formRef"},{default:$(()=>[t("div",fe,[t("div",_e,[t("div",be,[he,B(t("input",{required:"",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=c=>e.formData.Name=c),type:"text",placeholder:"Nome..."},null,512),[[M,e.formData.Name]])])])]),t("div",ge,[ye,t("button",{"data-kt-indicator":e.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[e.loading?S("",!0):(g(),y("span",$e,[h(" Invia "),m(n,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0"})])),e.loading?(g(),y("span",ke,[h(" Attendere... "),Se])):S("",!0)],8,ve)])]),_:1},8,["model","rules"])])])],512)}const Ie=N(ie,[["render",Ce]]),we=T({name:"accessory-type-list",components:{Datatable:P,UpdatePaymentTypeModal:le,AddPaymentTypeModal:Ie,Loading:U},setup(){let e=s(!0),o=s(0),d=s("");const f=s([{columnName:"Nome",columnLabel:"name",sortEnabled:!0,columnWidth:300},{columnName:"Azioni",columnLabel:"actions",sortEnabled:!1,columnWidth:135}]),a=s([]);let l=s([]);async function n(r){l.value=await V(r),e.value=!1}E(()=>{e.value=!0,n("")});const u=()=>{a.value.forEach(r=>{c(r)}),a.value.length=0},c=r=>{e.value=!0,A.post(`PaymentType/Delete?id=${r}`,{}).then(()=>{v.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{n("")})}).catch(({response:k})=>{v.fire({text:k.data.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{n("")})})},p=s(""),_=()=>{n(p.value),K.reinitialization()},i=r=>{const k=r.order==="asc";r.label&&R(l.value,r.label,{reverse:k})},C=r=>{a.value=r};function z(r,k){o.value=r,d.value=k}return{tableData:l,tableHeader:f,deleteItem:c,search:p,searchItems:_,selectedIds:a,deleteFewItems:u,sort:i,onItemSelect:C,getAssetPath:w,loading:e,selectedId:o,selectedName:d,showUpdateModal:z,getItems:n}}}),Te={class:"card"},Ae={class:"card-header border-0 pt-6"},Ne={class:"card-title"},Be={class:"d-flex align-items-center position-relative my-1"},Me={class:"card-toolbar"},De={key:0,class:"d-flex justify-content-end","data-kt-payment-table-toolbar":"base"},xe={type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_type"},ze={key:1,class:"d-flex justify-content-end align-items-center","data-kt-payment-table-toolbar":"selected"},Pe={class:"fw-bold me-5"},Ue={class:"me-2"},qe=t("div",{class:"d-flex justify-content-end align-items-center d-none","data-kt-payment-table-toolbar":"selected"},[t("div",{class:"fw-bold me-5"},[t("span",{class:"me-2","data-kt-payment-table-select":"selected_count"}),h("Selezionati ")]),t("button",{type:"button",class:"btn btn-danger","data-kt-payment-table-select":"delete_selected"}," Elimina Selezionati ")],-1),Ee={class:"card-body pt-0"},Ke=["onClick"],Oe=["onClick"];function Re(e,o,d,f,a,l){const n=b("KTIcon"),u=b("router-link"),c=b("Datatable"),p=b("UpdatePaymentTypeModal"),_=b("AddPaymentTypeModal");return g(),y(O,null,[t("div",Te,[t("div",Ae,[t("div",Ne,[t("div",Be,[m(n,{"icon-name":"magnifier","icon-class":"fs-1 position-absolute ms-6"}),B(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=i=>e.search=i),onInput:o[1]||(o[1]=i=>e.searchItems()),class:"form-control form-control-solid w-250px ps-15",placeholder:"Ricerca"},null,544),[[M,e.search]])])]),t("div",Me,[e.selectedIds.length===0?(g(),y("div",De,[t("button",xe,[m(n,{"icon-name":"plus","icon-class":"fs-2"}),h(" Aggiungi tipologia pagamento ")])])):(g(),y("div",ze,[t("div",Pe,[t("span",Ue,I(e.selectedIds.length),1),h("Selezionati ")]),t("button",{type:"button",class:"btn btn-danger",onClick:o[2]||(o[2]=i=>e.deleteFewItems())}," Elimina Selezionati ")])),qe])]),t("div",Ee,[m(c,{onOnSort:e.sort,onOnItemsSelect:e.onItemSelect,data:e.tableData,header:e.tableHeader,"enable-items-per-page-dropdown":!0,"checkbox-enabled":!0,"checkbox-label":"id",loading:e.loading},{code:$(({row:i})=>[h(I(i.code),1)]),name:$(({row:i})=>[m(u,{to:{name:"update-accessory",params:{id:i.id}},class:"text-gray-600 text-hover-primary mb-1"},{default:$(()=>[h(I(i.name),1)]),_:2},1032,["to"])]),actions:$(({row:i})=>[t("button",{class:"btn btn-light-info me-1","data-bs-toggle":"modal","data-bs-target":"#kt_modal_update_type",onClick:C=>e.showUpdateModal(i.id,i.name)},"Dettagli",8,Ke),t("button",{onClick:C=>e.deleteItem(i.id),class:"btn btn-light-danger me-1"},"Elimina",8,Oe)]),_:1},8,["onOnSort","onOnItemsSelect","data","header","loading"])])]),m(p,{id:e.selectedId,name:e.selectedName,onFormUpdateSubmitted:o[3]||(o[3]=i=>e.getItems(""))},null,8,["id","name"]),m(_,{onFormAddSubmitted:o[4]||(o[4]=i=>e.getItems(""))})],64)}const Je=N(we,[["render",Re]]);export{Je as default};
