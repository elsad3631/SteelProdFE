import{g as k}from"./assets-ce4ccef5.js";import{D as z}from"./Dropdown3-cbc0a13c.js";import{P as B,a as U,C as I,I as V,E as M,L as q,b as D,S as E,N as O}from"./Statement-cfa8a3ff.js";import{m as Q,u as N,H as $,r as p,o as P,at as C,_ as L,w as r,x as e,au as F,a0 as i,a6 as m,a5 as w,F as y,y as T,A,L as R,q as d,z as _}from"./index-93335d48.js";import{a as G}from"./accessories-e9fb4bc6.js";import{g as j}from"./accessoryTypes-6cd54398.js";import{g as H}from"./suppliers-d1b63873.js";import{g as x}from"./DeliveryTypes-dd2c53b6.js";import{S as u}from"./sweetalert2-d38ee055.js";import"./dom-8a591f7a.js";import"./index.esm-1ae408a5.js";import"./KTDataTable-88696261.js";const J=Q({name:"accessory-details",components:{PaymentRecords:B,PaymentMethods:U,CreditBalance:I,Invoices:V,Events:M,Logs:q,Earnings:D,Statement:E,Dropdown3:z,NewCardModal:O},setup(){const l=N(),s=$(),f=l.params.id;let a=p(!0);const c=p({id:0,accessoryType:"",accessoryTypeId:0,code:"",supplierArticleCode:"",name:"",description:"",unitOfMeasure:"",supplier:"",supplierId:0,price:0,packageQuantity:0,minimumStock:0,deliveryTimeframe:"",deliveryType:"",deliveryTypeId:0,quantity:0});let v=p([]),t=p([]),h=p([]);async function S(){var b,g,n;v.value=await j(""),t.value=await H(""),h.value=await x("");const o=await G(f);c.value={id:f,accessoryType:((b=o==null?void 0:o.accessoryType)==null?void 0:b.name)||"",accessoryTypeId:(o==null?void 0:o.accessoryTypeId)||0,code:(o==null?void 0:o.code)||"",supplierArticleCode:(o==null?void 0:o.supplierArticleCode)||"",name:(o==null?void 0:o.name)||"",description:(o==null?void 0:o.description)||"",unitOfMeasure:(o==null?void 0:o.unitOfMeasure)||"",supplier:((g=o==null?void 0:o.supplier)==null?void 0:g.name)||"",supplierId:(o==null?void 0:o.supplierId)||0,price:(o==null?void 0:o.price)||0,packageQuantity:(o==null?void 0:o.packageQuantity)||0,minimumStock:(o==null?void 0:o.minimumStock)||0,deliveryTimeframe:(o==null?void 0:o.deliveryTimeframe)||"",deliveryType:((n=o==null?void 0:o.deliveryType)==null?void 0:n.name)||"",deliveryTypeId:(o==null?void 0:o.deliveryTypeId)||0,quantity:(o==null?void 0:o.quantity)||0},a.value=!1}return P(()=>{a.value=!0,S()}),{getAssetPath:k,item:c,saveChanges:()=>{a.value=!0;const o=v.value.find(n=>n.name===c.value.accessoryType),b=t.value.find(n=>n.name===c.value.supplier),g=h.value.find(n=>n.name===c.value.deliveryType);if(o===void 0){u.fire({text:"Attenzione, selezionare la tipologia dell'accessorio.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}});return}if(b===void 0){u.fire({text:"Attenzione, selezionare il fornitore.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}});return}if(g===void 0){u.fire({text:"Attenzione, selezionare il metodo di pagamento.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}});return}C.post("Accessories/Update",c.value).then(()=>{setTimeout(()=>{a.value=!1,u.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})},2e3)}).catch(({response:n})=>{console.log(n),a.value=!1,u.fire({text:"Attenzione, si è verificato un errore.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})})},AccessoryTypes:v,Suppliers:t,DeliveryTypes:h,deleteItem:()=>{a.value=!0,C.post(`Accessories/Delete?id=${f}`,{}).then(()=>{setTimeout(()=>{a.value=!1,u.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})},1e3),s.push({name:"accessories-list"})}).catch(({response:o})=>{console.log(o)})},loading:a}}}),K=e("div",{class:"card mb-5 mb-xl-10"},[e("div",{class:"card-header border-0"},[e("div",{class:"card-title m-0"},[e("h3",{class:"fw-bold m-0"},"Dettagli")])])],-1),W={class:"collapse show"},X={class:"card-body border-top p-9"},Y={class:"row mb-6"},Z=e("label",{class:"col-lg-4 col-form-label required fw-semobold fs-6"},"Nome",-1),ee={class:"col-lg-8 fv-row"},oe={class:"row mb-6"},te=e("label",{class:"col-lg-4 col-form-label required fw-semobold fs-6"},"Codice",-1),le={class:"col-lg-8 fv-row"},se={class:"row mb-6"},ie=e("label",{class:"col-lg-4 col-form-label required fw-semobold fs-6"},"Codice articolo fornitore",-1),ne={class:"col-lg-8 fv-row"},ae={class:"row mb-6"},re=e("label",{class:"col-lg-4 col-form-label fw-semobold fs-6"},"Prezzo",-1),me={class:"col-lg-8 fv-row"},de={class:"row mb-6"},ce=e("label",{class:"col-lg-4 col-form-label required fw-semobold fs-6"},"Tipologia accessorio",-1),ue={class:"col-lg-8 fv-row"},pe=["value"],fe={class:"row mb-6"},ve=e("label",{class:"col-lg-4 col-form-label required fw-semobold fs-6"},"Fornitore",-1),be={class:"col-lg-8 fv-row"},ge=["value"],ye={class:"row mb-6"},he=e("label",{class:"col-lg-4 col-form-label fw-semobold fs-6"},[e("span",null,"Descrizione")],-1),we={class:"col-lg-8 fv-row"},Te={class:"row mb-6"},_e=e("label",{class:"col-lg-4 col-form-label fw-semobold fs-6"},"Giacenza minima",-1),Ce={class:"col-lg-8 fv-row"},Ae={class:"row mb-6"},Se=e("label",{class:"col-lg-4 col-form-label fw-semobold fs-6"},"Quantità per confezione",-1),ke={class:"col-lg-8 fv-row"},ze={class:"row mb-6"},Be=e("label",{class:"col-lg-4 col-form-label fw-semobold fs-6"},"Unità di misura",-1),Ue={class:"col-lg-8 fv-row"},Ie={class:"row mb-6"},Ve=e("label",{class:"col-lg-4 col-form-label fw-semobold fs-6"},"Tempistiche di consegna",-1),Me={class:"col-lg-8 fv-row"},qe={class:"row mb-6"},De=e("label",{class:"col-lg-4 col-form-label required fw-semobold fs-6"},"Modalità di consegna",-1),Ee={class:"col-lg-8 fv-row"},Oe=["value"],Qe={class:"card-footer d-flex justify-content-end py-6 px-9"},Ne=["data-kt-indicator"],$e={key:0,class:"indicator-label"},Pe={key:1,class:"indicator-progress"},Le=e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function Fe(l,s,f,a,c,v){return d(),r(y,null,[K,e("div",W,[e("form",{class:"form",novalidate:"",onSubmit:s[13]||(s[13]=F(t=>l.saveChanges(),["prevent"]))},[e("div",X,[e("div",Y,[Z,e("div",ee,[i(e("input",{type:"text",name:"name",class:"form-control form-control-lg",placeholder:"Nome","onUpdate:modelValue":s[0]||(s[0]=t=>l.item.name=t)},null,512),[[m,l.item.name]])])]),e("div",oe,[te,e("div",le,[i(e("input",{type:"text",name:"code",class:"form-control form-control-lg",placeholder:"Codice","onUpdate:modelValue":s[1]||(s[1]=t=>l.item.code=t)},null,512),[[m,l.item.code]])])]),e("div",se,[ie,e("div",ne,[i(e("input",{type:"text",name:"supplierArticleCode",class:"form-control form-control-lg",placeholder:"Codice articolo fornitore","onUpdate:modelValue":s[2]||(s[2]=t=>l.item.supplierArticleCode=t)},null,512),[[m,l.item.supplierArticleCode]])])]),e("div",ae,[re,e("div",me,[i(e("input",{type:"number",name:"price",class:"form-control form-control-lg",placeholder:"Prezzo","onUpdate:modelValue":s[3]||(s[3]=t=>l.item.price=t)},null,512),[[m,l.item.price]])])]),e("div",de,[ce,e("div",ue,[i(e("select",{as:"select",name:"country",class:"form-select form-select-lg fw-semobold","onUpdate:modelValue":s[4]||(s[4]=t=>l.item.accessoryType=t)},[(d(!0),r(y,null,T(l.AccessoryTypes,t=>(d(),r("option",{key:t.id,value:t.name},_(t.name),9,pe))),128))],512),[[w,l.item.accessoryType]])])]),e("div",fe,[ve,e("div",be,[i(e("select",{as:"select",name:"supplier",class:"form-select form-select-lg fw-semobold","onUpdate:modelValue":s[5]||(s[5]=t=>l.item.supplier=t)},[(d(!0),r(y,null,T(l.Suppliers,t=>(d(),r("option",{key:t.id,value:t.name},_(t.name),9,ge))),128))],512),[[w,l.item.supplier]])])]),e("div",ye,[he,e("div",we,[i(e("textarea",{name:"description",class:"form-control form-control-lg","onUpdate:modelValue":s[6]||(s[6]=t=>l.item.description=t)},null,512),[[m,l.item.description]])])]),e("div",Te,[_e,e("div",Ce,[i(e("input",{type:"number",name:"minimumStock",class:"form-control form-control-lg",placeholder:"Giacenza minima","onUpdate:modelValue":s[7]||(s[7]=t=>l.item.minimumStock=t)},null,512),[[m,l.item.minimumStock]])])]),e("div",Ae,[Se,e("div",ke,[i(e("input",{type:"number",name:"packageQuantity",class:"form-control form-control-lg",placeholder:"Quantità per confezione","onUpdate:modelValue":s[8]||(s[8]=t=>l.item.packageQuantity=t)},null,512),[[m,l.item.packageQuantity]])])]),e("div",ze,[Be,e("div",Ue,[i(e("input",{type:"text",name:"unitOfMeasure",class:"form-control form-control-lg",placeholder:"Unità di misura","onUpdate:modelValue":s[9]||(s[9]=t=>l.item.unitOfMeasure=t)},null,512),[[m,l.item.unitOfMeasure]])])]),e("div",Ie,[Ve,e("div",Me,[i(e("input",{type:"text",name:"deliveryTimeframe",class:"form-control form-control-lg",placeholder:"Tempistiche di consegna","onUpdate:modelValue":s[10]||(s[10]=t=>l.item.deliveryTimeframe=t)},null,512),[[m,l.item.deliveryTimeframe]])])]),e("div",qe,[De,e("div",Ee,[i(e("select",{as:"select",name:"deliveryType",class:"form-select form-select-lg fw-semobold","onUpdate:modelValue":s[11]||(s[11]=t=>l.item.deliveryType=t)},[(d(!0),r(y,null,T(l.DeliveryTypes,t=>(d(),r("option",{key:t.id,value:t.name},_(t.name),9,Oe))),128))],512),[[w,l.item.deliveryType]])])])]),e("div",Qe,[e("button",{type:"button",onClick:s[12]||(s[12]=t=>l.deleteItem()),class:"btn btn-danger btn-active-light-primary me-2"}," Elimina "),e("button",{"data-kt-indicator":l.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[l.loading?A("",!0):(d(),r("span",$e," Salva modifiche ")),l.loading?(d(),r("span",Pe,[R(" Attendere... "),Le])):A("",!0)],8,Ne)])],32)])],64)}const lo=L(J,[["render",Fe]]);export{lo as default};
