import{g as k}from"./assets-2a66e18f.js";import{D as w,L as S}from"./KTDataTable-b34f43d4.js";import{E,A as N}from"./AddGoodReceiptModal-77cb992e.js";import{a as D}from"./index-68cf51a8.js";import{j as M,r as m,o as x,an as A,M as L,_ as R,n as h,p as o,B as s,W as $,a0 as G,O as n,w as u,z as l,F as z,l as p,m as f}from"./index-ac5572e4.js";import{g as C}from"./goodsReceipt-3e128f38.js";import"./sweetalert2-e92a9e07.js";import"./alphabet-a5bbf61c.js";import"./dom-668969a5.js";import"./accessories-831a26ee.js";import"./materials-757cb655.js";import"./profiles-ab9c58bb.js";import"./suppliers-17d934fd.js";const W=M({name:"goods-receipt-list",components:{Datatable:w,ExportGoodReceiptsModal:E,AddGoodReceiptModal:N,Loading:S},setup(){let t=m(!0);const a=m([{columnName:"Numero documento",columnLabel:"documentNumber",sortEnabled:!0,columnWidth:175},{columnName:"Lotto",columnLabel:"goodName",sortEnabled:!0,columnWidth:230},{columnName:"QuantitÃ ",columnLabel:"quantity",sortEnabled:!0,columnWidth:175},{columnName:"Data",columnLabel:"date",sortEnabled:!0,columnWidth:175},{columnName:"Azioni",columnLabel:"actions",sortEnabled:!1,columnWidth:135}]),i=m([]);let b=m([]);async function r(e){b.value=await C(e),t.value=!1}x(()=>{t.value=!0,r("")});const _=()=>{i.value.forEach(e=>{d(e)}),i.value.length=0},d=e=>{t.value=!0,A.post(`GoodReceipt/Delete?id=${e}`,{}).then(()=>{r("")}).catch(({response:g})=>{console.log(g)})},c=m("");return{tableData:b,tableHeader:a,deleteItem:d,search:c,searchItems:()=>{r(c.value),L.reinitialization()},selectedIds:i,deleteFewItems:_,sort:e=>{const g=e.order==="asc";e.label&&D(b.value,e.label,{reverse:g})},onItemSelect:e=>{i.value=e},getAssetPath:k,loading:t,getItems:r}}}),F={class:"card"},O={class:"card-header border-0 pt-6"},T={class:"card-title"},j={class:"d-flex align-items-center position-relative my-1"},B={class:"card-toolbar"},V={key:0,class:"d-flex justify-content-end","data-kt-customer-table-toolbar":"base"},q={type:"button",class:"btn btn-light-primary me-3","data-bs-toggle":"modal","data-bs-target":"#kt_export_modal"},H={type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add"},K={key:1,class:"d-flex justify-content-end align-items-center","data-kt-customer-table-toolbar":"selected"},P={class:"fw-bold me-5"},Q={class:"me-2"},U=o("div",{class:"d-flex justify-content-end align-items-center d-none","data-kt-customer-table-toolbar":"selected"},[o("div",{class:"fw-bold me-5"},[o("span",{class:"me-2","data-kt-customer-table-select":"selected_count"}),n("Selezionati ")]),o("button",{type:"button",class:"btn btn-danger","data-kt-customer-table-select":"delete_selected"}," Elimina Selezionati ")],-1),J={class:"card-body pt-0"},X=["onClick"];function Y(t,a,i,b,r,_){const d=p("KTIcon"),c=p("router-link"),v=p("Datatable"),y=p("ExportGoodReceiptsModal"),I=p("AddGoodReceiptModal");return f(),h(z,null,[o("div",F,[o("div",O,[o("div",T,[o("div",j,[s(d,{"icon-name":"magnifier","icon-class":"fs-1 position-absolute ms-6"}),$(o("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>t.search=e),onInput:a[1]||(a[1]=e=>t.searchItems()),class:"form-control form-control-solid w-250px ps-15",placeholder:"Ricerca"},null,544),[[G,t.search]])])]),o("div",B,[t.selectedIds.length===0?(f(),h("div",V,[o("button",q,[s(d,{"icon-name":"exit-up","icon-class":"fs-2"}),n(" Export ")]),o("button",H,[s(d,{"icon-name":"plus","icon-class":"fs-2"}),n(" Aggiungi ")])])):(f(),h("div",K,[o("div",P,[o("span",Q,u(t.selectedIds.length),1),n("Selezionati ")]),o("button",{type:"button",class:"btn btn-danger",onClick:a[2]||(a[2]=e=>t.deleteFewItems())}," Elimina Selezionati ")])),U])]),o("div",J,[s(v,{onOnSort:t.sort,onOnItemsSelect:t.onItemSelect,data:t.tableData,header:t.tableHeader,"enable-items-per-page-dropdown":!0,"checkbox-enabled":!0,"checkbox-label":"id",loading:t.loading},{documentNumber:l(({row:e})=>[n(u(e.documentNumber),1)]),goodName:l(({row:e})=>[s(c,{to:{name:"update-good-receipt",params:{id:e.id}},class:"text-gray-600 text-hover-primary mb-1"},{default:l(()=>[n(u(e.goodName),1)]),_:2},1032,["to"])]),quantity:l(({row:e})=>[n(u(e.quantity),1)]),date:l(({row:e})=>[n(u(new Date(e.date).toLocaleDateString("it-IT")),1)]),actions:l(({row:e})=>[s(c,{to:{name:"update-good-receipt",params:{id:e.id}},class:"btn btn-light-info me-1"},{default:l(()=>[n("Dettagli")]),_:2},1032,["to"]),o("button",{onClick:g=>t.deleteItem(e.id),class:"btn btn-light-danger me-1"},"Elimina",8,X)]),_:1},8,["onOnSort","onOnItemsSelect","data","header","loading"])])]),s(y),s(I,{onFormAddSubmitted:a[3]||(a[3]=e=>t.getItems(""))})],64)}const ue=R(W,[["render",Y]]);export{ue as default};
