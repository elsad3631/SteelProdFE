import{g as w}from"./assets-2a66e18f.js";import{D as z,L as G}from"./KTDataTable-b34f43d4.js";import{h as R}from"./dom-668969a5.js";import{S as y}from"./sweetalert2-e92a9e07.js";import{j as A,r as n,a3 as U,an as I,_ as N,l as b,m as h,n as v,p as t,B as u,z as $,W as B,a0 as M,O as g,x as S,am as D,o as q,M as O,w as T,F as E}from"./index-ac5572e4.js";import{a as V}from"./index-68cf51a8.js";const F=A({name:"update-good-receipt-type",components:{},props:{id:{type:Number,required:!0},name:{type:String,required:!0}},setup(e,{emit:o}){const d=n(null),r=n(null),a=n(!1),l=n({Id:e.id??0,Name:e.name??""});U(()=>[e.id,e.name],([f,_])=>{l.value.Id=f!==void 0?Number(f):0,l.value.Name=_!==void 0?String(_):""});const s=n({name:[{required:!0,message:"Inserire il nome",trigger:"change"}]}),p="GoodReceiptType";return{formData:l,rules:s,submit:()=>{d.value&&d.value.validate(f=>{if(f)a.value=!0,I.post(`${p}/Update`,l.value).then(()=>{a.value=!1,y.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{R(r.value)}),o("formUpdateSubmitted",l.value)}).catch(({response:_})=>{console.log(_),a.value=!1,y.fire({text:"Attenzione, si è verificato un errore.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})});else return a.value=!1,y.fire({text:"Attenzione, non tutti i campi sono corretti.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}),!1})},formRef:d,loading:a,addCustomerModalRef:r,getAssetPath:w}}}),K={class:"modal fade",id:"kt_modal_update_type",ref:"updateTypeModal",tabindex:"-1","aria-hidden":"true"},L={class:"modal-dialog modal-dialog-centered mw-650px"},j={class:"modal-content"},W={class:"modal-header",id:"kt_modal_type_header"},H=t("h2",{class:"fw-bold"},"Modifica tipologia entrata merce",-1),P={id:"kt_modal_type_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},J={class:"modal-body py-10 px-lg-17"},Q={class:"scroll-y me-n7 pe-7",id:"kt_modal_type_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_type_header","data-kt-scroll-wrappers":"#kt_modal_type_scroll","data-kt-scroll-offset":"300px"},X={class:"fv-row mb-7"},Y=t("label",{class:"required fs-6 fw-semobold mb-2"},"Nome",-1),Z={class:"modal-footer flex-center"},ee=["data-kt-indicator"],te={key:0,class:"indicator-label"},oe={key:1,class:"indicator-progress"},ae=t("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function se(e,o,d,r,a,l){const s=b("KTIcon"),p=b("el-form");return h(),v("div",K,[t("div",L,[t("div",j,[t("div",W,[H,t("div",P,[u(s,{"icon-name":"cross","icon-class":"fs-1"})])]),u(p,{onSubmit:o[1]||(o[1]=D(m=>e.submit(),["prevent"])),model:e.formData,rules:e.rules,ref:"formRef"},{default:$(()=>[t("div",J,[t("div",Q,[t("div",X,[Y,B(t("input",{required:"",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=m=>e.formData.Name=m),type:"text",placeholder:"Nome..."},null,512),[[M,e.formData.Name]])])])]),t("div",Z,[t("button",{"data-kt-indicator":e.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[e.loading?S("",!0):(h(),v("span",te,[g(" Invia "),u(s,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0"})])),e.loading?(h(),v("span",oe,[g(" Attendere... "),ae])):S("",!0)],8,ee)])]),_:1},8,["model","rules"])])])],512)}const ne=N(F,[["render",se]]),le=A({name:"add-good-receipt-type-modal",components:{},setup(e,{emit:o}){const d=n(null),r=n(null),a=n(!1),l=n({Name:""}),s=n({name:[{required:!0,message:"Inserire il nome",trigger:"change"}]}),p="GoodReceiptType";return{formData:l,rules:s,submit:()=>{d.value&&d.value.validate(f=>{if(f)a.value=!0,I.post(`${p}/Create`,l.value).then(()=>{a.value=!1,y.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{R(r.value)}),o("formAddSubmitted",l.value)}).catch(({response:_})=>{console.log(_),a.value=!1,y.fire({text:"Attenzione, si è verificato un errore.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})});else return a.value=!1,y.fire({text:"Attenzione, non tutti i campi sono corretti.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}),!1})},formRef:d,loading:a,addCustomerModalRef:r,getAssetPath:w}}}),ie={class:"modal fade",id:"kt_modal_add_type",ref:"addTypeModal",tabindex:"-1","aria-hidden":"true"},de={class:"modal-dialog modal-dialog-centered mw-650px"},re={class:"modal-content"},ce={class:"modal-header",id:"kt_modal_add_type_header"},me=t("h2",{class:"fw-bold"},"Aggiungi tipologia entrata merce",-1),ue={id:"kt_modal_add_type_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},pe={class:"modal-body py-10 px-lg-17"},fe={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_type_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_type_header","data-kt-scroll-wrappers":"#kt_modal_add_type_scroll","data-kt-scroll-offset":"300px"},_e={class:"fv-row mb-7"},be=t("label",{class:"required fs-6 fw-semobold mb-2"},"Nome",-1),ge={class:"modal-footer flex-center"},he=t("button",{type:"reset",id:"kt_modal_add_customer_cancel",class:"btn btn-light me-3"}," Scarta ",-1),ve=["data-kt-indicator"],ye={key:0,class:"indicator-label"},$e={key:1,class:"indicator-progress"},ke=t("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function Se(e,o,d,r,a,l){const s=b("KTIcon"),p=b("el-form");return h(),v("div",ie,[t("div",de,[t("div",re,[t("div",ce,[me,t("div",ue,[u(s,{"icon-name":"cross","icon-class":"fs-1"})])]),u(p,{onSubmit:o[1]||(o[1]=D(m=>e.submit(),["prevent"])),model:e.formData,rules:e.rules,ref:"formRef"},{default:$(()=>[t("div",pe,[t("div",fe,[t("div",_e,[be,B(t("input",{required:"",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=m=>e.formData.Name=m),type:"text",placeholder:"Nome..."},null,512),[[M,e.formData.Name]])])])]),t("div",ge,[he,t("button",{"data-kt-indicator":e.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[e.loading?S("",!0):(h(),v("span",ye,[g(" Invia "),u(s,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0"})])),e.loading?(h(),v("span",$e,[g(" Attendere... "),ke])):S("",!0)],8,ve)])]),_:1},8,["model","rules"])])])],512)}const Ie=N(le,[["render",Se]]),Ce=e=>I.get(`GoodReceiptType/Get?currentPage=0&filterRequest=${e}`,"").then(({data:o})=>o.data.map(r=>({id:r.id,name:r.name}))).catch(({response:o})=>(console.error(o),[])),Te=A({name:"accessory-type-list",components:{Datatable:z,UpdateGoodReceiptTypeModal:ne,AddGoodReceiptTypeModal:Ie,Loading:G},setup(){let e=n(!0),o=n(0),d=n("");const r=n([{columnName:"Nome",columnLabel:"name",sortEnabled:!0,columnWidth:300},{columnName:"Azioni",columnLabel:"actions",sortEnabled:!1,columnWidth:135}]),a=n([]);let l=n([]);async function s(c){l.value=await Ce(c),e.value=!1}q(()=>{e.value=!0,s("")});const p=()=>{a.value.forEach(c=>{m(c)}),a.value.length=0},m=c=>{e.value=!0,I.post(`GoodReceiptType/Delete?id=${c}`,{}).then(()=>{y.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{s("")})}).catch(({response:k})=>{y.fire({text:k.data.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{s("")})})},f=n(""),_=()=>{s(f.value),O.reinitialization()},i=c=>{const k=c.order==="asc";c.label&&V(l.value,c.label,{reverse:k})},C=c=>{a.value=c};function x(c,k){o.value=c,d.value=k}return{tableData:l,tableHeader:r,deleteItem:m,search:f,searchItems:_,selectedIds:a,deleteFewItems:p,sort:i,onItemSelect:C,getAssetPath:w,loading:e,selectedId:o,selectedName:d,showUpdateModal:x,getItems:s}}}),we={class:"card"},Ae={class:"card-header border-0 pt-6"},Ne={class:"card-title"},Be={class:"d-flex align-items-center position-relative my-1"},Me={class:"card-toolbar"},Re={key:0,class:"d-flex justify-content-end","data-kt-goodreceipt-table-toolbar":"base"},De={type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_type"},xe={key:1,class:"d-flex justify-content-end align-items-center","data-kt-goodreceipt-table-toolbar":"selected"},ze={class:"fw-bold me-5"},Ge={class:"me-2"},Ue=t("div",{class:"d-flex justify-content-end align-items-center d-none","data-kt-goodreceipt-table-toolbar":"selected"},[t("div",{class:"fw-bold me-5"},[t("span",{class:"me-2","data-kt-goodreceipt-table-select":"selected_count"}),g("Selezionati ")]),t("button",{type:"button",class:"btn btn-danger","data-kt-goodreceipt-table-select":"delete_selected"}," Elimina Selezionati ")],-1),qe={class:"card-body pt-0"},Oe=["onClick"],Ee=["onClick"];function Ve(e,o,d,r,a,l){const s=b("KTIcon"),p=b("router-link"),m=b("Datatable"),f=b("UpdateGoodReceiptTypeModal"),_=b("AddGoodReceiptTypeModal");return h(),v(E,null,[t("div",we,[t("div",Ae,[t("div",Ne,[t("div",Be,[u(s,{"icon-name":"magnifier","icon-class":"fs-1 position-absolute ms-6"}),B(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=i=>e.search=i),onInput:o[1]||(o[1]=i=>e.searchItems()),class:"form-control form-control-solid w-250px ps-15",placeholder:"Ricerca"},null,544),[[M,e.search]])])]),t("div",Me,[e.selectedIds.length===0?(h(),v("div",Re,[t("button",De,[u(s,{"icon-name":"plus","icon-class":"fs-2"}),g(" Aggiungi tipologia entrata merce ")])])):(h(),v("div",xe,[t("div",ze,[t("span",Ge,T(e.selectedIds.length),1),g("Selezionati ")]),t("button",{type:"button",class:"btn btn-danger",onClick:o[2]||(o[2]=i=>e.deleteFewItems())}," Elimina Selezionati ")])),Ue])]),t("div",qe,[u(m,{onOnSort:e.sort,onOnItemsSelect:e.onItemSelect,data:e.tableData,header:e.tableHeader,"enable-items-per-page-dropdown":!0,"checkbox-enabled":!0,"checkbox-label":"id",loading:e.loading},{code:$(({row:i})=>[g(T(i.code),1)]),name:$(({row:i})=>[u(p,{to:{name:"update-accessory",params:{id:i.id}},class:"text-gray-600 text-hover-primary mb-1"},{default:$(()=>[g(T(i.name),1)]),_:2},1032,["to"])]),actions:$(({row:i})=>[t("button",{class:"btn btn-light-info me-1","data-bs-toggle":"modal","data-bs-target":"#kt_modal_update_type",onClick:C=>e.showUpdateModal(i.id,i.name)},"Dettagli",8,Oe),t("button",{onClick:C=>e.deleteItem(i.id),class:"btn btn-light-danger me-1"},"Elimina",8,Ee)]),_:1},8,["onOnSort","onOnItemsSelect","data","header","loading"])])]),u(f,{id:e.selectedId,name:e.selectedName,onFormUpdateSubmitted:o[3]||(o[3]=i=>e.getItems(""))},null,8,["id","name"]),u(_,{onFormAddSubmitted:o[4]||(o[4]=i=>e.getItems(""))})],64)}const Pe=N(Te,[["render",Ve]]);export{Pe as default};
