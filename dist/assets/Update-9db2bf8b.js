import{g as E}from"./assets-0fb52c34.js";import{D as P}from"./Dropdown3-d57d33d7.js";import{P as q,a as N,C as $,I,E as F,L as O,b as Q,S as L,N as R}from"./Statement-b1fb1a72.js";import{m as G,u as j,H,r as p,o as J,av as S,_ as K,w as n,x as e,aw as W,a0 as s,a6 as a,a5 as y,F as b,y as h,A as z,L as X,q as r,z as w}from"./index-6e218937.js";import{e as D,a as Y}from"./materials-20eb0be3.js";import{g as Z}from"./DeliveryTypes-2cfc28be.js";import{g as x}from"./materialTypes-5b6728de.js";import{g as ee}from"./suppliers-6abf7701.js";import{S as c}from"./sweetalert2-86394131.js";import"./dom-52183280.js";import"./index.esm-83cd74e7.js";import"./KTDataTable-be20d7ae.js";const oe=G({name:"customer-details",components:{PaymentRecords:q,PaymentMethods:N,CreditBalance:$,Invoices:I,Events:F,Logs:O,Earnings:Q,Statement:L,Dropdown3:P,NewCardModal:R},setup(){const t=j(),l=H(),g=t.params.id;let i=p(!0);const m=p(D);let u=p([]),o=p([]),v=p([]);async function M(){u.value=await x(""),o.value=await ee(""),v.value=await Z("");const f=await Y(g);m.value=f||D,i.value=!1}return J(()=>{i.value=!0,M()}),{getAssetPath:E,item:m,saveChanges:()=>{var _,T,C;i.value=!0;const f=(_=m.value)==null?void 0:_.materialType.name,U=u?u.value.find(d=>d.name===f):void 0,A=(T=m.value)==null?void 0:T.deliveryType.name,V=v?v.value.find(d=>d.name===A):void 0,k=(C=m.value)==null?void 0:C.supplier.name,B=o?o.value.find(d=>d.name===k):void 0;if(U===void 0){c.fire({text:"Attenzione, selezionare la tipologia del materiale.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}});return}if(B===void 0){c.fire({text:"Attenzione, selezionare il fornitore.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}});return}if(V===void 0){c.fire({text:"Attenzione, selezionare il metodo di pagamento.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}});return}S.post("Materials/Update",m.value).then(()=>{setTimeout(()=>{i.value=!1,c.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})},2e3)}).catch(({response:d})=>{console.log(d),i.value=!1,c.fire({text:"Attenzione, si è verificato un errore.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})})},MaterialTypes:u,Suppliers:o,DeliveryTypes:v,deleteItem:()=>{i.value=!0,S.post(`Materials/Delete?id=${g}`,{}).then(()=>{setTimeout(()=>{i.value=!1,c.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})},1e3),l.push({name:"accessories-list"})}).catch(({response:f})=>{console.log(f)})},loading:i}}}),te=e("div",{class:"card mb-5 mb-xl-10"},[e("div",{class:"card-header border-0"},[e("div",{class:"card-title m-0"},[e("h3",{class:"fw-bold m-0"},"Dettagli")])])],-1),le={class:"collapse show"},se={class:"card-body border-top p-9"},ae={class:"row mb-6"},ie=e("label",{class:"col-lg-4 col-form-label required fw-semobold fs-6"},"Nome",-1),ne={class:"col-lg-8 fv-row"},re={class:"row mb-6"},me=e("label",{class:"col-lg-4 col-form-label required fw-semobold fs-6"},"Codice",-1),de={class:"col-lg-8 fv-row"},ce={class:"row mb-6"},ue=e("label",{class:"col-lg-4 col-form-label required fw-semobold fs-6"},"Codice articolo fornitore",-1),fe={class:"col-lg-8 fv-row"},pe={class:"row mb-6"},ve=e("label",{class:"col-lg-4 col-form-label fw-semobold fs-6"},"Unità di misura",-1),be={class:"col-lg-8 fv-row"},ge={class:"row mb-6"},ye=e("label",{class:"col-lg-4 col-form-label fw-semobold fs-6"},"Funzione",-1),he={class:"col-lg-8 fv-row"},we={class:"row mb-6"},_e=e("label",{class:"col-lg-4 col-form-label required fw-semobold fs-6"},"Tipologia materiale",-1),Te={class:"col-lg-8 fv-row"},Ce=["value"],Se={class:"row mb-6"},ze=e("label",{class:"col-lg-4 col-form-label required fw-semobold fs-6"},"Fornitore",-1),De={class:"col-lg-8 fv-row"},Me=["value"],Ue={class:"row mb-6"},Ae=e("label",{class:"col-lg-4 col-form-label required fw-semobold fs-6"},"Modalità di consegna",-1),Ve={class:"col-lg-8 fv-row"},ke=["value"],Be={class:"row mb-6"},Ee=e("label",{class:"col-lg-4 col-form-label fw-semobold fs-6"},[e("span",null,"Descrizione")],-1),Pe={class:"col-lg-8 fv-row"},qe={class:"row mb-6"},Ne=e("label",{class:"col-lg-4 col-form-label fw-semobold fs-6"},"Prezzo unitario",-1),$e={class:"col-lg-8 fv-row"},Ie={class:"row mb-6"},Fe=e("label",{class:"col-lg-4 col-form-label fw-semobold fs-6"},"Quantità per confezione",-1),Oe={class:"col-lg-8 fv-row"},Qe={class:"row mb-6"},Le=e("label",{class:"col-lg-4 col-form-label fw-semobold fs-6"},"Giacenza minima",-1),Re={class:"col-lg-8 fv-row"},Ge={class:"row mb-6"},je=e("label",{class:"col-lg-4 col-form-label fw-semobold fs-6"},"Tempistiche di consegna",-1),He={class:"col-lg-8 fv-row"},Je={class:"row mb-6"},Ke=e("label",{class:"col-lg-4 col-form-label fw-semobold fs-6"},"Data ultima consegna",-1),We={class:"col-lg-8 fv-row"},Xe={class:"card-footer d-flex justify-content-end py-6 px-9"},Ye=["data-kt-indicator"],Ze={key:0,class:"indicator-label"},xe={key:1,class:"indicator-progress"},eo=e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function oo(t,l,g,i,m,u){return r(),n(b,null,[te,e("div",le,[e("form",{class:"form",novalidate:"",onSubmit:l[15]||(l[15]=W(o=>t.saveChanges(),["prevent"]))},[e("div",se,[e("div",ae,[ie,e("div",ne,[s(e("input",{type:"text",name:"name",class:"form-control form-control-lg",placeholder:"Nome","onUpdate:modelValue":l[0]||(l[0]=o=>t.item.name=o)},null,512),[[a,t.item.name]])])]),e("div",re,[me,e("div",de,[s(e("input",{type:"text",name:"code",class:"form-control form-control-lg",placeholder:"Codice","onUpdate:modelValue":l[1]||(l[1]=o=>t.item.code=o)},null,512),[[a,t.item.code]])])]),e("div",ce,[ue,e("div",fe,[s(e("input",{type:"text",name:"supplierArticleCode",class:"form-control form-control-lg",placeholder:"Codice articolo fornitore","onUpdate:modelValue":l[2]||(l[2]=o=>t.item.supplierArticleCode=o)},null,512),[[a,t.item.supplierArticleCode]])])]),e("div",pe,[ve,e("div",be,[s(e("input",{type:"text",name:"unitOfMeasure",class:"form-control form-control-lg",placeholder:"Unità di misura","onUpdate:modelValue":l[3]||(l[3]=o=>t.item.unitOfMeasure=o)},null,512),[[a,t.item.unitOfMeasure]])])]),e("div",ge,[ye,e("div",he,[s(e("input",{type:"text",name:"function",class:"form-control form-control-lg",placeholder:"Funzione","onUpdate:modelValue":l[4]||(l[4]=o=>t.item.function=o)},null,512),[[a,t.item.function]])])]),e("div",we,[_e,e("div",Te,[s(e("select",{as:"select",name:"materialType",class:"form-select form-select-lg fw-semobold","onUpdate:modelValue":l[5]||(l[5]=o=>t.item.materialType.name=o)},[(r(!0),n(b,null,h(t.MaterialTypes,o=>(r(),n("option",{key:o.id,value:o.name},w(o.name),9,Ce))),128))],512),[[y,t.item.materialType.name]])])]),e("div",Se,[ze,e("div",De,[s(e("select",{as:"select",name:"supplier",class:"form-select form-select-lg fw-semobold","onUpdate:modelValue":l[6]||(l[6]=o=>t.item.supplier.name=o)},[(r(!0),n(b,null,h(t.Suppliers,o=>(r(),n("option",{key:o.id,value:o.name},w(o.name),9,Me))),128))],512),[[y,t.item.supplier.name]])])]),e("div",Ue,[Ae,e("div",Ve,[s(e("select",{as:"select",name:"deliveryType",class:"form-select form-select-lg fw-semobold","onUpdate:modelValue":l[7]||(l[7]=o=>t.item.deliveryType.name=o)},[(r(!0),n(b,null,h(t.DeliveryTypes,o=>(r(),n("option",{key:o.id,value:o.name},w(o.name),9,ke))),128))],512),[[y,t.item.deliveryType.name]])])]),e("div",Be,[Ee,e("div",Pe,[s(e("textarea",{name:"description",class:"form-control form-control-lg","onUpdate:modelValue":l[8]||(l[8]=o=>t.item.description=o)},null,512),[[a,t.item.description]])])]),e("div",qe,[Ne,e("div",$e,[s(e("input",{type:"number",name:"unitPrice",class:"form-control form-control-lg",placeholder:"Prezzo unitario","onUpdate:modelValue":l[9]||(l[9]=o=>t.item.unitPrice=o)},null,512),[[a,t.item.unitPrice]])])]),e("div",Ie,[Fe,e("div",Oe,[s(e("input",{type:"number",name:"packagingQuantity",class:"form-control form-control-lg",placeholder:"Quantità per confezione","onUpdate:modelValue":l[10]||(l[10]=o=>t.item.packagingQuantity=o)},null,512),[[a,t.item.packagingQuantity]])])]),e("div",Qe,[Le,e("div",Re,[s(e("input",{type:"number",name:"minimumStock",class:"form-control form-control-lg",placeholder:"Giacenza minima","onUpdate:modelValue":l[11]||(l[11]=o=>t.item.minimumStock=o)},null,512),[[a,t.item.minimumStock]])])]),e("div",Ge,[je,e("div",He,[s(e("input",{type:"text",name:"deliveryTiming",class:"form-control form-control-lg",placeholder:"Tempistiche di consegna","onUpdate:modelValue":l[12]||(l[12]=o=>t.item.deliveryTiming=o)},null,512),[[a,t.item.deliveryTiming]])])]),e("div",Je,[Ke,e("div",We,[s(e("input",{type:"date",name:"lastDeliveryDate",class:"form-control form-control-lg",placeholder:"Data ultima consegna","onUpdate:modelValue":l[13]||(l[13]=o=>t.item.lastDeliveryDate=o)},null,512),[[a,t.item.lastDeliveryDate]])])])]),e("div",Xe,[e("button",{type:"button",onClick:l[14]||(l[14]=o=>t.deleteItem()),class:"btn btn-danger btn-active-light-primary me-2"}," Elimina "),e("button",{"data-kt-indicator":t.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[t.loading?z("",!0):(r(),n("span",Ze," Salva modifiche ")),t.loading?(r(),n("span",xe,[X(" Attendere... "),eo])):z("",!0)],8,Ye)])],32)])],64)}const go=K(oe,[["render",oo]]);export{go as default};
