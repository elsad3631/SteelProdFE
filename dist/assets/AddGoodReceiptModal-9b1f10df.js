import{g as R}from"./assets-f2dd46cc.js";import{S as v}from"./sweetalert2-894bbab6.js";import{a as q}from"./alphabet-a5bbf61c.js";import{m as V,r as s,av as G,_ as U,p as D,q as l,w as n,x as e,K as y,C as M,a0 as u,F as S,y as k,z as C,a5 as x,L as A,A as N,aw as T,o as F,ac as L,a6 as w}from"./index-9aa4c59a.js";import{h as Q}from"./dom-543d1801.js";import{g as z}from"./accessories-de6e08b5.js";import{g as K}from"./materials-92314bb1.js";import{g as O}from"./profiles-da2edf08.js";import{g as P}from"./suppliers-9327a123.js";const j=V({name:"export-good-receipts-modal",components:{},setup(){const o=s(null),a=s(!1),d=s({Filter:"",fromName:"A",toName:"Z",exportFormat:"excel"}),g=s({});return{formData:d,rules:g,submit:()=>{o.value&&o.value.validate(r=>{if(r){a.value=!0;let m=s(""),f=s("");if(d.value.exportFormat=="excel")m.value="ExportExcel",f.value=".xlsx";else if(d.value.exportFormat=="csv")m.value="ExportCsv",f.value=".csv";else{v.fire({text:"Attenzione, selezionare il formato del file.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}),a.value=!1;return}G.get(`GoodReceipt/${m.value}?fromName=${d.value.fromName}&toName=${d.value.toName}`,"blob").then(t=>{const $=URL.createObjectURL(new Blob([t.data])),b=document.createElement("a");b.href=$,b.setAttribute("download","export entrata merci"+f.value),document.body.appendChild(b),b.click(),window.URL.revokeObjectURL($),document.body.removeChild(b),a.value=!1,v.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})}).catch(({response:t})=>{console.log(t),a.value=!1,v.fire({text:"Attenzione, si è verificato un errore.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})})}else return v.fire({text:"Attenzione, si è verificato un errore.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}),!1})},formRef:o,loading:a,getAssetPath:R,alphabet:q}}});const Z={class:"modal fade",id:"kt_export_modal",tabindex:"-1","aria-hidden":"true"},H={class:"modal-dialog modal-dialog-centered mw-650px"},J={class:"modal-content"},W={class:"modal-header"},X=e("h2",{class:"fw-bold"},"Export entrata merci",-1),Y={id:"kt_export_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},ee={class:"modal-body scroll-y mx-5 mx-xl-15 my-7"},te={class:"fv-row mb-10"},oe=e("label",{class:"fs-5 fw-semobold form-label mb-5"},"Seleziona il range da lettera a lettera:",-1),ae={class:"input-group mb-5"},se=["value"],le=e("span",{class:"input-group-text"},"-",-1),ne=["value"],re={class:"fv-row mb-10"},ie=e("label",{class:"fs-5 fw-semobold form-label mb-5"},"Seleziona il formato:",-1),de=e("option",{value:"excel"},"Excel",-1),me=e("option",{value:"csv"},"CSV",-1),ce=[de,me],ue={class:"text-center"},fe=e("button",{type:"reset",id:"kt_export_cancel",class:"btn btn-light me-3"}," Scarta ",-1),pe=["data-kt-indicator"],be={key:0,class:"indicator-label"},ve={key:1,class:"indicator-progress"},_e=e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function he(o,a,d,g,p,r){const m=D("KTIcon"),f=D("el-form");return l(),n("div",Z,[e("div",H,[e("div",J,[e("div",W,[X,e("div",Y,[y(m,{"icon-name":"cross","icon-class":"fs-1"})])]),e("div",ee,[y(f,{onSubmit:a[3]||(a[3]=T(t=>o.submit(),["prevent"])),model:o.formData,rules:o.rules,ref:"formRef"},{default:M(()=>[e("div",te,[oe,e("div",ae,[u(e("select",{class:"form-select","aria-label":"Select example","onUpdate:modelValue":a[0]||(a[0]=t=>o.formData.fromName=t)},[(l(!0),n(S,null,k(o.alphabet,t=>(l(),n("option",{key:t.name,value:t.name},C(t.name),9,se))),128))],512),[[x,o.formData.fromName]]),le,u(e("select",{class:"form-select","aria-label":"Select example","onUpdate:modelValue":a[1]||(a[1]=t=>o.formData.toName=t)},[(l(!0),n(S,null,k(o.alphabet,t=>(l(),n("option",{key:t.name,value:t.name},C(t.name),9,ne))),128))],512),[[x,o.formData.toName]])])]),e("div",re,[ie,u(e("select",{class:"form-select","aria-label":"Select example","onUpdate:modelValue":a[2]||(a[2]=t=>o.formData.exportFormat=t)},ce,512),[[x,o.formData.exportFormat]])]),e("div",ue,[fe,e("button",{"data-kt-indicator":o.loading?"on":null,type:"submit",class:"btn btn-lg btn-primary"},[o.loading?N("",!0):(l(),n("span",be,[A(" Invia "),y(m,{"icon-name":"arrow-right","icon-class":"fs-3 ms-2 me-0"})])),o.loading?(l(),n("span",ve,[A(" Attendere... "),_e])):N("",!0)],8,pe)])]),_:1},8,["model","rules"])])])])])}const ut=U(j,[["render",he]]),ge=V({name:"add-accessory-modal",components:{},setup(o,{emit:a}){const d=s(null),g=s(null),p=s(!1),r=s({DocumentNumber:0,Date:Date(),TypeId:0,GoodId:0,GoodName:"",Quantity:0,Supplier:"",SupplierId:0,Note:""}),m=s({DocumentNumber:[{required:!0,message:"Inserire il numero del documento",trigger:"change"}],Quantity:[{required:!0,message:"Inserire la quantità",trigger:"change"}]}),f="GoodReceipt";let t=s([]),$=s([]),b=s([]),B=s([]),_=s([]);const I=s(0);async function E(){try{B.value=await P(""),t.value=await z(""),_.value=t.value.map(i=>({id:i.id,name:i.name}))}catch(i){console.error(i)}}return F(()=>{E()}),L(I,async(i,h)=>{_.value=[],r.value.TypeId=i,i==0&&h!=0?(t.value=await z(""),_.value=t.value.map(c=>({id:c.id,name:c.name}))):i==1&&h!=1?(b.value=await O(""),_.value=b.value.map(c=>({id:c.id,name:c.name}))):i==2&&h!=2&&($.value=await K(""),_.value=$.value.map(c=>({id:c.id,name:c.name})))}),{formData:r,rules:m,submit:()=>{var i;if(d.value){if(r.value.GoodId==0){v.fire({text:"Attenzione, selezionare il tipo di lotto.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}});return}r.value.GoodName=((i=_.value.find(h=>h.id===r.value.GoodId))==null?void 0:i.name)||"",d.value.validate(h=>{if(h)p.value=!0,console.log(r.value),G.post(`${f}/Create`,r.value).then(()=>{p.value=!1,v.fire({text:"Operazione completata!",icon:"success",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(()=>{Q(g.value)}),a("formAddSubmitted",r.value)}).catch(({response:c})=>{console.log(c.data.message),p.value=!1,v.fire({text:c.data.message,icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})});else return p.value=!1,v.fire({text:"Attenzione, non tutti i campi sono corretti.",icon:"error",buttonsStyling:!1,confirmButtonText:"Continua!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}),!1})}},formRef:d,loading:p,addCustomerModalRef:g,getAssetPath:R,Suppliers:B,GoodsList:_,typeId:I}}}),ye={class:"modal fade",id:"kt_modal_add",ref:"addCustomerModalRef",tabindex:"-1","aria-hidden":"true"},xe={class:"modal-dialog modal-dialog-centered mw-650px"},$e={class:"modal-content"},we={class:"modal-header",id:"kt_modal_add_header"},De=e("h2",{class:"fw-bold"},"Aggiungi entrata merci",-1),Se={id:"kt_modal_add_close","data-bs-dismiss":"modal",class:"btn btn-icon btn-sm btn-active-icon-primary"},ke={class:"modal-body py-10 px-lg-17"},Ce={class:"scroll-y me-n7 pe-7",id:"kt_modal_add_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_header","data-kt-scroll-wrappers":"#kt_modal_add_scroll","data-kt-scroll-offset":"300px"},Ae={class:"fv-row mb-7"},Ne=e("label",{class:"required fs-6 fw-semobold mb-2"},"Numero documento",-1),Be={class:"fv-row mb-7"},Ie=e("label",{class:"fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"Data")],-1),ze={class:"d-flex flex-column mb-7 fv-row"},Re=e("label",{class:"fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"Tipologia")],-1),Ve=e("option",{value:"0"},"Accessorio",-1),Ge=e("option",{value:"1"},"Profilo",-1),Ue=e("option",{value:"2"},"Materiale",-1),Me=[Ve,Ge,Ue],Te={class:"d-flex flex-column mb-7 fv-row"},Ee=e("label",{class:"fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"Lotto")],-1),qe=["value"],Fe={class:"fv-row mb-7"},Le=e("label",{class:"fs-6 fw-semobold mb-2"},"Quantità",-1),Qe={class:"d-flex flex-column mb-7 fv-row"},Ke=e("label",{class:"fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"Fornitore")],-1),Oe=e("option",{value:""},"Seleziona il fornitore...",-1),Pe=["value"],je={class:"fv-row mb-7"},Ze=e("label",{class:"fs-6 fw-semobold mb-2"},"Descrizione",-1),He={class:"modal-footer flex-center"},Je=e("button",{type:"reset",id:"kt_modal_add_cancel",class:"btn btn-light me-3"}," Scarta ",-1),We=["data-kt-indicator"],Xe={key:0,class:"indicator-label"},Ye={key:1,class:"indicator-progress"},et=e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function tt(o,a,d,g,p,r){const m=D("KTIcon"),f=D("el-form");return l(),n("div",ye,[e("div",xe,[e("div",$e,[e("div",we,[De,e("div",Se,[y(m,{"icon-name":"cross","icon-class":"fs-1"})])]),y(f,{onSubmit:a[7]||(a[7]=T(t=>o.submit(),["prevent"])),model:o.formData,rules:o.rules,ref:"formRef"},{default:M(()=>[e("div",ke,[e("div",Ce,[e("div",Ae,[Ne,u(e("input",{class:"form-control","onUpdate:modelValue":a[0]||(a[0]=t=>o.formData.DocumentNumber=t),type:"text",placeholder:"Numero documento..."},null,512),[[w,o.formData.DocumentNumber]])]),e("div",Be,[Ie,u(e("input",{class:"form-control","onUpdate:modelValue":a[1]||(a[1]=t=>o.formData.Date=t),type:"date",placeholder:"Data..."},null,512),[[w,o.formData.Date]])]),e("div",ze,[Re,u(e("select",{class:"form-select","aria-label":"Select example","onUpdate:modelValue":a[2]||(a[2]=t=>o.typeId=t)},Me,512),[[x,o.typeId]])]),e("div",Te,[Ee,u(e("select",{class:"form-select","aria-label":"Select example","onUpdate:modelValue":a[3]||(a[3]=t=>o.formData.GoodId=t)},[(l(!0),n(S,null,k(o.GoodsList,t=>(l(),n("option",{key:t.id,value:t.id},C(t.name),9,qe))),128))],512),[[x,o.formData.GoodId]])]),e("div",Fe,[Le,u(e("input",{class:"form-control","onUpdate:modelValue":a[4]||(a[4]=t=>o.formData.Quantity=t),type:"number",placeholder:"Quantità..."},null,512),[[w,o.formData.Quantity]])]),e("div",Qe,[Ke,u(e("select",{class:"form-select","aria-label":"Select example","onUpdate:modelValue":a[5]||(a[5]=t=>o.formData.SupplierId=t)},[Oe,(l(!0),n(S,null,k(o.Suppliers,t=>(l(),n("option",{key:t.id,value:t.id},C(t.name),9,Pe))),128))],512),[[x,o.formData.SupplierId]])]),e("div",je,[Ze,u(e("textarea",{class:"form-control","onUpdate:modelValue":a[6]||(a[6]=t=>o.formData.Note=t),type:"text",placeholder:"Descrizione..."},null,512),[[w,o.formData.Note]])])])]),e("div",He,[Je,e("button",{"data-kt-indicator":o.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[o.loading?N("",!0):(l(),n("span",Xe,[A(" Invia "),y(m,{"icon-name":"arrow-right","icon-class":"fs-2 me-2 me-0"})])),o.loading?(l(),n("span",Ye,[A(" Attendere... "),et])):N("",!0)],8,We)])]),_:1},8,["model","rules"])])])],512)}const ft=U(ge,[["render",tt]]);export{ft as A,ut as E};
